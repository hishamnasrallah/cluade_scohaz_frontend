<!-- src/app/components/theme-creator/theme-creator.component.html -->
<div class="theme-creator-container">
  <!-- Header -->
  <mat-card class="theme-header ocean-mint-card">
    <div class="header-content">
      <div class="brand-section">
        <div class="logo-wrapper">
          <mat-icon class="brand-icon">palette</mat-icon>
        </div>
        <div class="brand-info">
          <h1 class="brand-title">Theme Builder Pro</h1>
          <p class="brand-subtitle">Enterprise Dynamic Theme System</p>
        </div>
      </div>

      <div class="header-actions">
        <button mat-stroked-button
                class="ocean-mint-stroked"
                (click)="fileInput.click()">
          <mat-icon>upload</mat-icon>
          Import
        </button>
        <input #fileInput
               type="file"
               accept=".json"
               style="display: none"
               (change)="importTheme($event)">

        <button mat-stroked-button
                class="ocean-mint-stroked"
                (click)="exportTheme()">
          <mat-icon>download</mat-icon>
          Export
        </button>

        <button mat-stroked-button
                class="ocean-mint-stroked"
                (click)="resetTheme()">
          <mat-icon>refresh</mat-icon>
          Reset
        </button>

        <button mat-raised-button
                color="primary"
                [disabled]="isSaving"
                (click)="saveTheme()">
          <mat-icon>save</mat-icon>
          {{ isSaving ? 'Saving...' : 'Save Theme' }}
        </button>

        <button mat-icon-button
                [matTooltip]="currentTheme.mode === 'light' ? 'Switch to Dark Mode' : 'Switch to Light Mode'"
                (click)="toggleMode()">
          <mat-icon>{{ currentTheme.mode === 'light' ? 'dark_mode' : 'light_mode' }}</mat-icon>
        </button>
      </div>
    </div>
  </mat-card>

  <!-- Main Content Grid -->
  <div class="content-grid">
    <!-- Theme Controls Panel -->
    <mat-card class="controls-panel ocean-mint-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>tune</mat-icon>
          Theme Controls
        </mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <!-- Design Presets -->
        <div class="presets-section">
          <h3 class="section-title">Design Presets</h3>
          <div class="presets-grid">
            <button *ngFor="let preset of themePresets"
                    mat-stroked-button
                    class="preset-button"
                    [ngClass]="{'active': currentTheme.designStyle === preset.config.designStyle && currentTheme.primaryColor === preset.config.primaryColor}"
                    (click)="applyPreset(preset)"
                    [matTooltip]="preset.name">
              <span class="preset-icon">{{ preset.icon }}</span>
              <span class="preset-name">{{ preset.name }}</span>
            </button>
          </div>
        </div>

        <mat-divider class="section-divider"></mat-divider>

        <!-- Theme Customization Tabs -->
        <mat-tab-group [(selectedIndex)]="selectedTabIndex"
                       animationDuration="300ms"
                       class="theme-tabs">

          <!-- Colors Tab -->
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon>palette</mat-icon>
              <span>Colors</span>
            </ng-template>

            <div class="tab-content">
              <!-- Advanced Color Controls with ALL color properties -->
              <app-advanced-color-controls
                [theme]="currentTheme"
                (themeChange)="onThemeChange($event)">
              </app-advanced-color-controls>
            </div>
          </mat-tab>

          <!-- Typography Tab -->
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon>text_fields</mat-icon>
              <span>Typography</span>
            </ng-template>

            <div class="tab-content">
              <!-- Advanced Typography Controls with ALL typography properties -->
              <app-advanced-typography-controls
                [theme]="currentTheme"
                (themeChange)="onThemeChange($event)">
              </app-advanced-typography-controls>
            </div>
          </mat-tab>

          <!-- Layout & Spacing Tab -->
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon>view_quilt</mat-icon>
              <span>Layout</span>
            </ng-template>

            <div class="tab-content">
              <!-- Layout Controls with grid, spacing, containers -->
              <app-layout-controls
                [theme]="currentTheme"
                (themeChange)="onThemeChange($event)">
              </app-layout-controls>
            </div>
          </mat-tab>

          <!-- Borders & Radius Tab -->
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon>rounded_corner</mat-icon>
              <span>Borders</span>
            </ng-template>

            <div class="tab-content">
              <!-- Border Controls with all radius and border properties -->
              <app-border-controls
                [theme]="currentTheme"
                (themeChange)="onThemeChange($event)">
              </app-border-controls>
            </div>
          </mat-tab>

          <!-- Shadows & Effects Tab -->
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon>blur_on</mat-icon>
              <span>Effects</span>
            </ng-template>

            <div class="tab-content">
              <!-- Shadow Controls with all shadow definitions -->
              <app-shadow-controls
                [theme]="currentTheme"
                (themeChange)="onThemeChange($event)">
              </app-shadow-controls>
            </div>
          </mat-tab>

          <!-- Components Tab -->
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon>widgets</mat-icon>
              <span>Components</span>
            </ng-template>

            <div class="tab-content">
              <!-- Component Controls with button, input, card properties -->
              <app-component-controls
                [theme]="currentTheme"
                (themeChange)="onThemeChange($event)">
              </app-component-controls>
            </div>
          </mat-tab>

          <!-- Animation Tab -->
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon>animation</mat-icon>
              <span>Animation</span>
            </ng-template>

            <div class="tab-content">
              <app-animation-controls
                [theme]="currentTheme"
                (themeChange)="onThemeChange($event)">
              </app-animation-controls>
            </div>
          </mat-tab>

          <!-- Brand Tab -->
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon>business</mat-icon>
              <span>Brand</span>
            </ng-template>

            <div class="tab-content">
              <app-brand-controls
                [theme]="currentTheme"
                (themeChange)="onThemeChange($event)">
              </app-brand-controls>
            </div>
          </mat-tab>

          <!-- Accessibility Tab -->
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon>accessibility</mat-icon>
              <span>A11y</span>
            </ng-template>

            <div class="tab-content">
              <app-accessibility-controls
                [theme]="currentTheme"
                (themeChange)="onThemeChange($event)">
              </app-accessibility-controls>
            </div>
          </mat-tab>
        </mat-tab-group>
      </mat-card-content>
    </mat-card>

    <!-- Live Preview Panel -->
    <div class="preview-panel">
      <mat-card class="ocean-mint-card preview-container">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>visibility</mat-icon>
            Live Preview
          </mat-card-title>
          <button mat-icon-button
                  (click)="isPreviewExpanded = !isPreviewExpanded"
                  [matTooltip]="isPreviewExpanded ? 'Collapse' : 'Expand'">
            <mat-icon>{{ isPreviewExpanded ? 'fullscreen_exit' : 'fullscreen' }}</mat-icon>
          </button>
        </mat-card-header>

        <mat-card-content class="preview-content">
          <!-- Preview Container with Isolated Styles -->
          <div #previewContainer class="theme-preview-root">
            <!-- Brand Header -->
            <div class="preview-brand-header theme-brand-header">
              <img *ngIf="currentTheme.logoUrl"
                   [src]="currentTheme.logoUrl"
                   alt="Logo"
                   class="theme-logo"
                   (error)="onLogoError($event)">
              <h2 class="theme-brand-name">{{ currentTheme.brandName }}</h2>
            </div>

            <!-- Navigation Example -->
            <nav class="preview-nav theme-nav">
              <button *ngFor="let item of navigationItems; trackBy: trackByNavItem"
                      mat-button
                      class="nav-item theme-nav-item">
                {{ item }}
              </button>
            </nav>

            <!-- Metrics Grid -->
            <div class="metrics-grid theme-metrics">
              <mat-card *ngFor="let metric of sampleMetrics; trackBy: trackByMetric"
                        class="metric-card theme-card">
                <div class="metric-header">
                  <mat-icon class="theme-icon" [style.color]="metric.trend === 'up' ? currentTheme.successColor : currentTheme.errorColor">
                    {{ metric.icon }}
                  </mat-icon>
                  <span class="metric-change theme-text-accent"
                        [style.color]="metric.trend === 'up' ? currentTheme.successColor : currentTheme.errorColor">
                    {{ metric.change }}
                  </span>
                </div>
                <h3 class="metric-value theme-heading">{{ metric.value }}</h3>
                <p class="metric-title theme-text">{{ metric.title }}</p>
              </mat-card>
            </div>

            <!-- Sample Form -->
            <mat-card class="sample-form-card theme-card">
              <mat-card-header>
                <mat-card-title class="theme-heading">Sample Form</mat-card-title>
              </mat-card-header>

              <mat-card-content>
                <form class="sample-form">
                  <div class="form-row">
                    <mat-form-field appearance="outline" class="theme-form-field">
                      <mat-label>Full Name</mat-label>
                      <input matInput placeholder="Enter your name" class="theme-input">
                      <mat-icon matPrefix class="theme-icon">person</mat-icon>
                    </mat-form-field>

                    <mat-form-field appearance="outline" class="theme-form-field">
                      <mat-label>Email</mat-label>
                      <input matInput type="email" placeholder="Enter your email" class="theme-input">
                      <mat-icon matPrefix class="theme-icon">email</mat-icon>
                    </mat-form-field>
                  </div>

                  <mat-form-field appearance="outline" class="theme-form-field full-width">
                    <mat-label>Message</mat-label>
                    <textarea matInput rows="4" placeholder="Type your message..." class="theme-input"></textarea>
                  </mat-form-field>

                  <div class="button-group">
                    <button mat-raised-button
                            [ngClass]="{
                              'theme-button-primary': currentTheme.buttonStyle === 'primary',
                              'theme-button-secondary': currentTheme.buttonStyle === 'secondary'
                            }"
                            class="theme-button">
                      <mat-icon>check</mat-icon>
                      Primary
                    </button>

                    <button mat-raised-button class="theme-button-secondary">
                      <mat-icon>refresh</mat-icon>
                      Secondary
                    </button>

                    <button mat-stroked-button
                            [ngClass]="{
                              'theme-button-outline': currentTheme.buttonStyle === 'outline'
                            }"
                            class="theme-button">
                      <mat-icon>radio_button_unchecked</mat-icon>
                      Outline
                    </button>

                    <button mat-button
                            [ngClass]="{
                              'theme-button-ghost': currentTheme.buttonStyle === 'ghost'
                            }"
                            class="theme-button">
                      Ghost
                    </button>

                    <button mat-raised-button class="theme-button-error">
                      <mat-icon>warning</mat-icon>
                      Error
                    </button>

                    <button mat-raised-button class="theme-button-success">
                      <mat-icon>check_circle</mat-icon>
                      Success
                    </button>
                  </div>
                </form>
              </mat-card-content>
            </mat-card>

            <!-- Typography Preview -->
            <mat-card class="typography-preview theme-card">
              <mat-card-header>
                <mat-card-title class="theme-heading">Typography Showcase</mat-card-title>
              </mat-card-header>

              <mat-card-content>
                <h1 class="theme-h1">Heading Level 1</h1>
                <h2 class="theme-h2">Heading Level 2</h2>
                <h3 class="theme-h3">Heading Level 3</h3>
                <h4 class="theme-h4">Heading Level 4</h4>
                <p class="theme-text">
                  This is a paragraph with regular text. It demonstrates the base font family,
                  size, weight, line height, and letter spacing settings.
                </p>
                <p class="theme-text-secondary">
                  This is secondary text with a lighter appearance, perfect for descriptions
                  and supporting content.
                </p>
                <a href="#" class="theme-link" (click)="$event.preventDefault()">This is a themed link</a>
              </mat-card-content>
            </mat-card>

            <!-- Feature Showcase -->
            <mat-card class="features-card theme-card">
              <mat-card-header>
                <mat-card-title class="theme-heading">Enterprise Features</mat-card-title>
              </mat-card-header>

              <mat-card-content>
                <div class="features-grid">
                  <div *ngFor="let feature of enterpriseFeatures; trackBy: trackByFeature"
                       class="feature-item theme-feature-card">
                    <div class="feature-icon theme-icon-container">
                      <mat-icon class="theme-icon-large">{{ feature.icon }}</mat-icon>
                    </div>
                    <h4 class="feature-title theme-heading-small">{{ feature.title }}</h4>
                    <p class="feature-desc theme-text-secondary">{{ feature.description }}</p>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>

            <!-- Component Showcase -->
            <mat-expansion-panel class="components-panel theme-expansion">
              <mat-expansion-panel-header class="theme-expansion-header">
                <mat-panel-title>
                  <mat-icon class="theme-icon">widgets</mat-icon>
                  Component Examples
                </mat-panel-title>
              </mat-expansion-panel-header>

              <div class="components-showcase">
                <!-- Chips Example -->
                <div class="component-example">
                  <h4 class="theme-heading-small">Chips</h4>
                  <mat-chip-listbox class="theme-chips">
                    <mat-chip-option class="theme-chip-primary">Angular</mat-chip-option>
                    <mat-chip-option class="theme-chip-secondary">Material</mat-chip-option>
                    <mat-chip-option class="theme-chip">TypeScript</mat-chip-option>
                    <mat-chip-option class="theme-chip-accent">SCSS</mat-chip-option>
                  </mat-chip-listbox>
                </div>

                <!-- Progress Example -->
                <div class="component-example">
                  <h4 class="theme-heading-small">Progress Indicators</h4>
                  <div class="progress-examples">
                    <mat-progress-spinner mode="determinate"
                                          [value]="75"
                                          diameter="60"
                                          class="theme-spinner">
                    </mat-progress-spinner>
                    <div class="progress-bar-container">
                      <div class="theme-progress-bar" [style.width.%]="65"></div>
                    </div>
                  </div>
                </div>

                <!-- Toggle Example -->
                <div class="component-example">
                  <h4 class="theme-heading-small">Toggle Controls</h4>
                  <div class="toggle-examples">
                    <mat-slide-toggle class="theme-toggle" checked>Enabled Feature</mat-slide-toggle>
                    <mat-slide-toggle class="theme-toggle">Disabled Feature</mat-slide-toggle>
                  </div>
                </div>

                <!-- Badge Example -->
                <div class="component-example">
                  <h4 class="theme-heading-small">Badges & Notifications</h4>
                  <div class="badge-examples">
                    <button mat-icon-button
                            [matBadge]="8"
                            matBadgeColor="primary"
                            class="theme-icon-button">
                      <mat-icon class="theme-icon">notifications</mat-icon>
                    </button>
                    <button mat-icon-button
                            [matBadge]="15"
                            matBadgeColor="accent"
                            class="theme-icon-button">
                      <mat-icon class="theme-icon">mail</mat-icon>
                    </button>
                    <button mat-icon-button
                            [matBadge]="3"
                            matBadgeColor="warn"
                            class="theme-icon-button">
                      <mat-icon class="theme-icon">error</mat-icon>
                    </button>
                  </div>
                </div>

                <!-- Alert Examples -->
                <div class="component-example">
                  <h4 class="theme-heading-small">Alerts</h4>
                  <div class="alert-examples">
                    <div class="theme-alert theme-alert-info">
                      <mat-icon class="theme-icon">info</mat-icon>
                      Information message
                    </div>
                    <div class="theme-alert theme-alert-success">
                      <mat-icon class="theme-icon">check_circle</mat-icon>
                      Success message
                    </div>
                    <div class="theme-alert theme-alert-warning">
                      <mat-icon class="theme-icon">warning</mat-icon>
                      Warning message
                    </div>
                    <div class="theme-alert theme-alert-error">
                      <mat-icon class="theme-icon">error</mat-icon>
                      Error message
                    </div>
                  </div>
                </div>
              </div>
            </mat-expansion-panel>

            <!-- Shadow & Effects Preview -->
            <mat-card class="effects-preview theme-card" *ngIf="currentTheme.enableShadows || currentTheme.enableBlur || currentTheme.designStyle === 'glassmorphic' || currentTheme.designStyle === 'neumorphic'">
              <mat-card-header>
                <mat-card-title class="theme-heading">Effects Preview</mat-card-title>
              </mat-card-header>

              <mat-card-content>
                <div class="effects-grid">
                  <div class="shadow-example theme-shadow-small" *ngIf="currentTheme.enableShadows">
                    Small Shadow
                  </div>
                  <div class="shadow-example theme-shadow-medium" *ngIf="currentTheme.enableShadows">
                    Medium Shadow
                  </div>
                  <div class="shadow-example theme-shadow-large" *ngIf="currentTheme.enableShadows">
                    Large Shadow
                  </div>
                  <div class="glass-example theme-glass" *ngIf="currentTheme.designStyle === 'glassmorphic' && currentTheme.enableBlur">
                    Glass Effect
                  </div>
                  <div class="neuro-example theme-neuro" *ngIf="currentTheme.designStyle === 'neumorphic'">
                    Neumorphic
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
